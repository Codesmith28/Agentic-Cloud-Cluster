<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="AI-Driven Agentic Scheduler Sequence" id="sequence-diagram">
    <mxGraphModel dx="1000" dy="700" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Actors -->
        <mxCell id="Client" value="Client" style="shape=umlActor;" vertex="1" parent="1">
          <mxGeometry x="20" y="20" width="80" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="Master" value="Master" style="shape=umlActor;" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="80" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="Planner" value="Planner (Python)" style="shape=umlActor;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="120" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="Workers" value="Workers" style="shape=umlActor;" vertex="1" parent="1">
          <mxGeometry x="600" y="20" width="100" height="80" as="geometry"/>
        </mxCell>

        <!-- Messages Step 1: Task Submission -->
        <mxCell id="msg1" value="SubmitTask(task)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Client" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg2" value="Enqueue(task)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg3" value="GetSnapshotOfWorkers()" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg4" value="RequestPlan(tasks, workers)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Planner">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Messages Step 2: Planning -->
        <mxCell id="msg5" value="Compute optimal assignment" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Planner" target="Planner">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg6" value="Return PlanResponse" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Planner" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Messages Step 3: Task Dispatch -->
        <mxCell id="msg7" value="AssignTask(task1)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Workers">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg8" value="LaunchTask(task1)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Workers" target="Workers">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Messages Step 4: Heartbeat / Completion -->
        <mxCell id="msg9" value="Heartbeat(status, resource usage)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Workers" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg10" value="ReportTaskCompletion(task, status)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Workers" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Messages Step 5: Replanning -->
        <mxCell id="msg11" value="DetectFailure(workerX)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg12" value="Replan(failedTasks)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Planner">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg13" value="Return UpdatedPlan" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Planner" target="Master">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="msg14" value="ReassignTasks(failedTasks)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;endArrow=block;html=1;" edge="1" parent="1" source="Master" target="Workers">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
